%
% biblatex-japanese.sty
%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{biblatex-japanese}[2017/01/02 Japanese language support for biblatex]

\RequirePackage{etoolbox}

\newtoggle{blxja@chicago}

\newcommand*{\DeclareOptionsToChicago}[1]{%
  \edef\@tempa{#1}%
  \@for\@tempb:=\@tempa\do{%
    \DeclareOption{\@tempb}{\PassOptionsToPackage{\CurrentOption}{biblatex-chicago}}}}

\DeclareOption{chicago}{\global\toggletrue{blxja@chicago}}
\DeclareOptionsToChicago{authordate,notes,authordate-trad,authordate15,notes15,footmarkoff}
\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{biblatex}}

\PassOptionsToPackage{%
  language=japanese,
  sortlocale=japanese,
  bibencoding=utf8,texencoding=utf8, % for platex and uplatex
}{biblatex}

\ProcessOptions*

\iftoggle{blxja@chicago}{%
  \RequirePackage{biblatex-chicago}[2016/06/01]%
  \def\thefootnote{\@arabic\c@footnote)}%
  \patchcmd{\@makefntext}
           {\@thefnmark.\,\,}
           {\@thefnmark\hspace{1em}}{}{}}{}
\RequirePackage{biblatex}[2016/05/14]

\ifundef{\blxja@macrosdefined}
        {\input{biblatex-japanese.def}}
        {}

\endinput
